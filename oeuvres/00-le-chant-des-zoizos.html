<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Le Chant des Zoizos</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    /* Override pour conserver le ratio des images */
    .card-inner {
      display: inline-block;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
    }
    .card-inner img {
      display: block;
      width: 100%;
      height: auto;
      backface-visibility: hidden;
    }
    .card-inner .back {
      position: absolute;
      top: 0;
      left: 0;
      transform: rotateY(180deg);
    }
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    /* On garde le grid 3 colonnes */
    .bento {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-top: 2rem;
      justify-items: center;
    }
  </style>
</head>
<body>
  <main>
    <h1>Le Chant des Zoizos</h1>

    <!-- Affiche principale -->
    <img src="../images/LCDZ-AFFICHE.jpg"
         alt="Le Chant des Zoizos"
         style="max-width:300px;width:100%;box-shadow:0 8px 20px rgba(0,0,0,0.2);">

    <!-- Texte de présentation -->
    <p><strong>
      Studio Bagarre signe une exposition aussi accessible que désobéissante, à la croisée du graphisme pop et de la poésie piquante.
      Dans un univers coloré, direct, mais toujours sensible, texte et image s’épousent, s’entrechoquent, se répondent comme les langues et cultures de La Réunion.
    </strong></p>
    <!-- … tes paragraphes suivants … -->

    <!-- Bento : miniatures retournables -->
    <div class="bento">
      <!-- exemple de carte -->
      <div class="card">
        <div class="card-inner">
          <!-- FACE AVANT (lien cliquable) -->
          <a class="front-link" href="avocat.html">
            <img src="../images/avocat.png" alt="AVOCAT">
          </a>
          <!-- DOS -->
          <img class="back" src="../images/mickey.jpg" alt="Dos de carte">
        </div>
      </div>

      <!-- répète pour chaque affiche : -->
      <div class="card">
        <div class="card-inner">
          <a class="front-link" href="banan.html">
            <img src="../images/banan.png" alt="BANAN">
          </a>
          <img class="back" src="../images/mickey.jpg" alt="Dos de carte">
        </div>
      </div>

      <div class="card">
        <div class="card-inner">
          <a class="front-link" href="bouchon.html">
            <img src="../images/bouchon.png" alt="BOUCHON">
          </a>
          <img class="back" src="../images/mickey.jpg" alt="Dos de carte">
        </div>
      </div>

      <!-- … et ainsi de suite pour les 35 cartes … -->

      <div class="card">
        <div class="card-inner">
          <a class="front-link" href="zoizo.html">
            <img src="../images/zoizo.png" alt="ZOIZO">
          </a>
          <img class="back" src="../images/mickey.jpg" alt="Dos de carte">
        </div>
      </div>
    </div>
  </main>

  <!-- Navigation circulaire -->
  <nav class="nav">
    <a href="last-page.html">← Précédent</a>
    <a href="01-zoizo.html">Suivant →</a>
  </nav>

  <!-- Footer avec Instagram -->
  <footer>
    <a href="https://www.instagram.com/studiobagarre/" target="_blank" rel="noopener">
      <img src="../logo.png" alt="Studio Bagarre" class="logo">
    </a>
  </footer>

  <!-- Script de flip tactile + adaptation de la hauteur -->
  <script>
    document.querySelectorAll('.card').forEach(card => {
      const link = card.querySelector('.front-link');
      const inner = card.querySelector('.card-inner');
      const frontImg = card.querySelector('.card-front img');
      let timer, startX;

      // Fonction pour fixer la hauteur du container au ratio de l'image
      function fixHeight() {
        const h = frontImg.getBoundingClientRect().height;
        inner.style.height = h + 'px';
      }

      // Appliquer dès le chargement et au redimensionnement
      frontImg.addEventListener('load', fixHeight);
      window.addEventListener('resize', fixHeight);
      if (frontImg.complete) fixHeight();

      // Gestion du flip tactile
      card.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        timer = setTimeout(() => {
          card.classList.add('ready-swipe');
          link.style.pointerEvents = 'none';
        }, 300);
      });

      card.addEventListener('touchmove', e => {
        if (!card.classList.contains('ready-swipe')) return;
        const dx = e.touches[0].clientX - startX;
        if (Math.abs(dx) > 30) {
          card.classList.toggle('flipped');
          card.classList.remove('ready-swipe');
          clearTimeout(timer);
        }
      });

      ['touchend','touchcancel'].forEach(evt =>
        card.addEventListener(evt, () => {
          clearTimeout(timer);
          card.classList.remove('ready-swipe');
          link.style.pointerEvents = '';
        })
      );
    });
  </script>
</body>
</html>
